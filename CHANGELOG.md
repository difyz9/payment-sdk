# Payment SDK æ›´æ–°è¯´æ˜

## v1.2.0 - 2026-01-20

### ğŸ”„ è®¢å•çŠ¶æ€åŒæ­¥æ›´æ–°

#### ğŸ“ æ›´æ–°å†…å®¹

1. âœ… è®¢å•çŠ¶æ€å¸¸é‡ä¸åç«¯ä¿æŒå®Œå…¨ä¸€è‡´
2. âœ… æ–°å¢ `OrderStatusScanned` (2) - å·²æ‰«ç çŠ¶æ€
3. âœ… æ–°å¢ `OrderStatusPaidFailed` (101) - æ”¯ä»˜å¤±è´¥çŠ¶æ€
4. âœ… æ–°å¢ `OrderStatusRefunded` (400) - å·²é€€æ¬¾çŠ¶æ€
5. âœ… ä¿®æ­£ `OrderStatusPaidSuccess` ä» 2 æ”¹ä¸º 201
6. âœ… ä¿®æ­£ `OrderStatusClosed` ä» 201 æ”¹ä¸º 300
7. âœ… æ–°å¢çŠ¶æ€åˆ¤æ–­è¾…åŠ©æ–¹æ³•ï¼š`IsPaymentFailed()`, `IsScanned()`, `IsRefunded()`

#### ğŸ¯ è®¢å•çŠ¶æ€åˆ—è¡¨

| çŠ¶æ€ç  | å¸¸é‡ | è¯´æ˜ |
|--------|------|------|
| 1 | `OrderStatusNotPaid` | æœªæ”¯ä»˜ |
| 2 | `OrderStatusScanned` | å·²æ‰«ç  |
| 101 | `OrderStatusPaidFailed` | æ”¯ä»˜å¤±è´¥ |
| 201 | `OrderStatusPaidSuccess` | æ”¯ä»˜æˆåŠŸ |
| 300 | `OrderStatusClosed` | å·²å…³é—­ |
| 400 | `OrderStatusRefunded` | å·²é€€æ¬¾ |

#### ğŸ“¦ æ›´æ–°çš„æ–‡ä»¶

- `types.go` - æ›´æ–°è®¢å•çŠ¶æ€å¸¸é‡å’Œè¾…åŠ©æ–¹æ³•
- `README.md` - æ›´æ–°è®¢å•çŠ¶æ€æ–‡æ¡£
- `CHANGELOG.md` - æ·»åŠ æ›´æ–°è®°å½•

#### âš ï¸ ç ´åæ€§å˜æ›´

å¦‚æœæ‚¨çš„ä»£ç ä¸­ä½¿ç”¨äº†ç¡¬ç¼–ç çš„çŠ¶æ€å€¼ï¼Œè¯·æ›´æ–°ï¼š

```go
// âŒ æ—§ä»£ç ï¼ˆä¸å†æ­£ç¡®ï¼‰
if orderStatus.Status == 2 {  // ä¹‹å‰è¡¨ç¤º"å·²æ”¯ä»˜"
    // ...
}

// âœ… æ–°ä»£ç ï¼ˆæ¨èä½¿ç”¨å¸¸é‡ï¼‰
if orderStatus.Status == paymentsdk.OrderStatusPaidSuccess {  // ç°åœ¨æ˜¯ 201
    // ...
}

// âœ… æ›´å¥½çš„æ–¹å¼ï¼ˆä½¿ç”¨è¾…åŠ©æ–¹æ³•ï¼‰
if orderStatus.IsPaymentSuccess() {
    // ...
}
```

#### ğŸ”„ å‘åå…¼å®¹å»ºè®®

ä¸ºç¡®ä¿å…¼å®¹æ€§ï¼Œå»ºè®®ï¼š
1. ä½¿ç”¨ SDK æä¾›çš„å¸¸é‡è€Œéç¡¬ç¼–ç æ•°å€¼
2. ä½¿ç”¨çŠ¶æ€åˆ¤æ–­è¾…åŠ©æ–¹æ³•ï¼ˆ`IsPaymentSuccess()` ç­‰ï¼‰
3. åŠæ—¶æ›´æ–° SDK åˆ°æœ€æ–°ç‰ˆæœ¬

---

## v1.1.0 - 2026-01-17

## ğŸ‰ æ–°å¢åŠŸèƒ½ï¼šæ”¯ä»˜å®è‡ªå®šä¹‰ ReturnURL æ”¯æŒ

### ğŸ“ æ›´æ–°å†…å®¹

1. âœ… åœ¨ `PaymentRequest` ä¸­æ·»åŠ  `ReturnURL` å­—æ®µ
2. âœ… æ›´æ–° API æ–‡æ¡£è¯´æ˜
3. âœ… æ›´æ–°ç¤ºä¾‹ä»£ç 
4. âœ… æ–°å¢è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—

### ğŸ“¦ æ›´æ–°çš„æ–‡ä»¶

- `types.go` - æ·»åŠ  ReturnURL å­—æ®µå®šä¹‰
- `README.md` - æ›´æ–° API æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹
- `example_usage.go` - æ›´æ–°ç¤ºä¾‹ä»£ç 
- `RETURN_URL_GUIDE.md` - æ–°å¢è¯¦ç»†ä½¿ç”¨æŒ‡å—ï¼ˆNEWï¼‰

### ğŸš€ å¿«é€Ÿä½¿ç”¨

```go
import paymentsdk "github.com/difyz9/payment-sdk-go"

// åˆ›å»ºå®¢æˆ·ç«¯
client := paymentsdk.NewClient(&paymentsdk.Config{
    BaseURL:   "https://api.example.com",
    AppID:     "your-app-id",
    AppSecret: "your-app-secret",
})

// åˆ›å»ºæ”¯ä»˜è®¢å•ï¼ˆå¸¦è‡ªå®šä¹‰è¿”å›åœ°å€ï¼‰
req := &paymentsdk.PaymentRequest{
    Subject:   "VIPä¼šå‘˜å¹´å¡",
    Amount:    299.00,
    PayWay:    paymentsdk.PayWayAlipay,
    ReturnURL: "https://mystore.com/payment/success", // ğŸ¯ è‡ªå®šä¹‰è¿”å›åœ°å€
    OrderType: "vip",
    UserID:    "user_12345",
}

paymentData, err := client.CreatePayment(req)
```

### ğŸ“š æ–‡æ¡£é“¾æ¥

- **ä¸»æ–‡æ¡£**: [README.md](./README.md)
- **ReturnURL è¯¦ç»†æŒ‡å—**: [RETURN_URL_GUIDE.md](./RETURN_URL_GUIDE.md)
- **å®Œæ•´ç¤ºä¾‹**: [example_usage.go](./example_usage.go)

### ğŸ’¡ ä½¿ç”¨åœºæ™¯

1. **ä¸åŒå•†å“ä¸åŒé¡µé¢** - VIPå……å€¼è·³è½¬ä¼šå‘˜ä¸­å¿ƒï¼Œå•†å“è´­ä¹°è·³è½¬è®¢å•è¯¦æƒ…
2. **æºå¸¦è‡ªå®šä¹‰å‚æ•°** - åœ¨URLä¸­ä¼ é€’ä¸šåŠ¡å‚æ•°
3. **ç§»åŠ¨ç«¯/PCç«¯åŒºåˆ†** - æ ¹æ®è®¾å¤‡è·³è½¬ä¸åŒé¡µé¢
4. **A/Bæµ‹è¯•** - ä¸åŒç”¨æˆ·è·³è½¬ä¸åŒè½åœ°é¡µ

### âš ï¸ é‡è¦æç¤º

1. **å¿…é¡»éªŒè¯è®¢å•** - åœ¨è¿”å›é¡µé¢ä¸­è°ƒç”¨ `QueryOrder()` éªŒè¯è®¢å•çŠ¶æ€
2. **HTTPS åè®®** - ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨ HTTPS
3. **åŒæ­¥ vs å¼‚æ­¥** - ReturnURL æ˜¯åŒæ­¥è¿”å›ï¼ˆé¡µé¢å±•ç¤ºï¼‰ï¼Œè®¢å•çŠ¶æ€ä»¥å¼‚æ­¥é€šçŸ¥ä¸ºå‡†
4. **ä¸æºå¸¦æ•æ„Ÿä¿¡æ¯** - ä¸è¦åœ¨ URL ä¸­ä¼ é€’å¯†ç ç­‰æ•æ„Ÿæ•°æ®

### ğŸ“– è¯¦ç»†è¯´æ˜

æ›´å¤šè¯¦ç»†ä¿¡æ¯å’Œæœ€ä½³å®è·µï¼Œè¯·æŸ¥çœ‹ï¼š
ğŸ‘‰ [ReturnURL ä½¿ç”¨æŒ‡å—](./RETURN_URL_GUIDE.md)

### ğŸ”„ å‘åå…¼å®¹

- âœ… ReturnURL æ˜¯å¯é€‰å‚æ•°ï¼Œä¸è®¾ç½®åˆ™ä½¿ç”¨æœåŠ¡ç«¯é»˜è®¤é…ç½®
- âœ… ä¸å½±å“ç°æœ‰ä»£ç ï¼Œå®Œå…¨å‘åå…¼å®¹
- âœ… æ‰€æœ‰ç°æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

---

**æ›´æ–°æ—¥æœŸ**: 2026-01-17
**ç‰ˆæœ¬**: v1.1.0
